[TOC]

# 总体概要

## 编号设计
考虑运算的高效性别，所有的物品，技能宠物采用数字编号的，并按照常量提供出去
具体规划如下

编号格式： **0b1aaaabbbbbbbbcccccccccccc** 

- 统一按照二进制的格式来表示
- 第一位为1，只作为占位符，不起任何作用
- 2~5位作为大类，共计16种，表示归属于哪一种
- 6~13位，256种，作为每个大类中更细的分类，
- 14~25位，共计2048种，作为每个类中具体的编号


下表表示各个大类中的编号，更具体的编号，见每个对应章节


| 序号 | 名称 | 编号(aaaa) |
| :--: | :--: | :--------: |
|  1   | 场地 |    0001    |
|  2   |      |            |
|  3   |      |            |


## 地图设计
- 每个地图按照方向有 东南西北四个方向，纵向有上下两个方向
- 地图分类有城镇地图、怪物地图，其中怪物地图可以进行挂机
- 怪物地图的解锁，需要击败每个地图的守护者，守护者第一次通过时，可以获得丰厚奖励，之后与守护者的切磋
- 通关的怪物地图，可以进行挂机，计算在线收益，挂机过程收益经验，金钱，装备，宠物蛋，材料

### npc类别
 对于城镇地图，会有设置npc，不同地点的npc

## 战斗设计

### 场地设计
- team的设置为5个主角，5个宠物
- 人物每个位置有 **近、中、远**之分，位置的差异具体会体现在兵器的伤害，以及技能的释放上。
例如，近战能力的，攻击处于**远**  这个位置的敌人，造成的伤害将会减损。
- 场地添加环境系统，环境的不同，对于造成的伤害损益会有一定的影响，该部分影响设计为`±20%`

### 攻击种类
物理攻击、法术攻击、加血、复活，纯粹伤害（暗器）


### 防御种类
反伤，

### 命中
首先生成一个随机书，随机数 0~100
然后按照双方身手属性，生成一个阈值，当随机数小于等于这个阈值的时候，则为false，表示对手躲避成功

攻击方为x，防御方为y，按他们的身手来计算，身手越好，则躲避的概率越大
则命中的计算为 `val = y / ( 4x + y )` ，计算的值换算为百分比，当随机数大于这个值的时候，那么才判定为通过，伪代码如下
```
var random_val = random(0-100)

// src 攻击发起放
// dest 攻击接收方
// factor 影响因子
function calcLimit(src, dest, factor){
	return (dest / (factor*src + dest)) * 100%
}
```
可以根据这个公式来抽象出，需要根据双方属性来进行判定的方法


### 伤害计算
- 物理伤害计算 = (攻击方攻击力 - 防御方防御力) * 1.2
- 法术伤害计算 = (攻击方灵力 - 防御方防御力) * 1.8
- 纯粹伤害为真实伤害，（例如毒这种）

## 装备设计
- 装备按能力来说，进攻型（物理，法术，纯粹），防御型（物法防御，身手，速度），状态型（中毒，休眠，气血，内力），因此三件装备对应属性
  - 武器：物理，灵力，念力（与封印类似）
  - 服饰：防御，气血，内力（有一些上衣是属于全身，装备后不能装备下身装备）
  - 鞋：身手，速度
- 套装系统：不同套装侧重的属性不同，套装生效条件是同名装备数=3

## 技能设计
- 装备品质分为6个级别，以装备的字颜来区分，对于数值属性的装备，不同级别的属性浮动不一样
  - 黑色：-5% ~ 5%
  - 灰色：0% ~ 10%
  - 蓝色：10% ~ 15%
  - 紫色：15% ~ 20%
  - 橙色：20% ~ 30%，（击杀精英怪或boss获取）
  - 红色：30% ~ 50%，（只能通过锻造获取）
- 装备获取的概率设计，在判定为得到装备的前提下
  - 普通战斗中获取前4种，4个比例是`4:3:2:1`
  - 当战斗中有精英怪或boss的时候，前5种比例为`2:2:3:2:1`
  - 当锻造装备的时候，从蓝色品质开始，比例依次是`8:9:2:1`，也就是获取橙色以上装备概率为15%。

## 属性与 等级
- 人物升级不需要添加什么属性点，系统会自动给每个属性点+1
等级封顶100级，从50级开始，每10级需要进行一次渡劫，50-90共计5次，每次渡劫成功后，可以获取的技能点分别是 10, 20, 30, 40, 50
- 人物设置的属性有
  - 生命力hp
  - 内力值mp
  - 物理攻击
  - 灵力
  - 防御
  - 身手
  - 速度
  - 念力
  - 幸运值 (幸运值可影响获取物品的概率，与战斗无关)

## 技能设计
人物升级获取技能点，技能点可以用于学习技能，每个角色只能选择一种修行路线，从10级开始，每次升级获取2点技能点，则按照满级100级来计算，可以得到的总技能技能点为90*2+150 = **330** 点技能点

技能分为 主动技能和被动技能，每一类还分为初级技能，高级技能，终极技能
- 初级技能：等级>=10可以学习，共设置5个技能(主动3个，被动2个)，每个技能满级为20点技能点，共计消耗100技能点
- 高级技能：等级>=50可以学习，共设置8个技能(主动5个，被动3个)，每个技能满级为40点技能点，共计小号320技能点
- 终极技能：等级>=90可以学习，共设置3个技能(主动2个，被动1个)，每个技能满级为20点技能点，共计消耗60技能点

则技能点覆盖率为 330/480 = 68.75%

## 锻造设计

## 宠物设计

## 黑市设计

## 任务系统
### 侠客任务
捉拿天下逃犯

### 试炼任务